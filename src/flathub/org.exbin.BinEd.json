{
  "app-id" : "org.exbin.BinEd",
  "branch" : "stable",
  "runtime" : "org.freedesktop.Platform",
  "runtime-version" : "22.08",
  "sdk" : "org.freedesktop.Sdk",
  "sdk-extensions" : [ "org.freedesktop.Sdk.Extension.openjdk11" ],
  "command": "org.exbin.BinEd",
  "finish-args": [
     "--share=ipc",
     "--share=network",
     "--socket=x11",
     "--filesystem=host",
     "--device=dri"
  ],
  "modules" : [
    {
      "name" : "openjdk",
      "buildsystem" : "simple",
      "build-commands" : [ "/usr/lib/sdk/openjdk11/install.sh" ]
    },
    {
      "name": "bined",
      "buildsystem": "simple",
      "build-commands": [
        "mkdir -p ${FLATPAK_DEST}/bined",
        "cp -r * ${FLATPAK_DEST}/bined"
      ],
      "sources": [{
        "type": "archive",
        "url": "https://bined.exbin.org/download/bined-0.2.2.zip",
        "dest-filename": "bined-package.zip",
        "sha256": "e29ee83fbcb27f1db9b180b6998ff8b45b411ff232d48dcde2faaf812202642e"
      }]
    },
    {
      "name": "bined-startup",
      "buildsystem": "simple",
      "build-commands": [
        "install -Dm755 ${FLATPAK_ID} ${FLATPAK_DEST}/bin/${FLATPAK_ID}",
        "install -Dm644 ${FLATPAK_ID}.desktop ${FLATPAK_DEST}/share/applications/${FLATPAK_ID}.desktop",
        "install -Dm644 ${FLATPAK_ID}.appdata.xml ${FLATPAK_DEST}/share/metainfo/${FLATPAK_ID}.appdata.xml",
        "for size in 32 48 256; do rsvg-convert ${FLATPAK_ID}.svg -w ${size} -h ${size} -a -f png -o ${size}.png; install -Dm644 ${size}.png ${FLATPAK_DEST}/share/icons/hicolor/${size}x${size}/apps/${FLATPAK_ID}.png; done",
        "install -Dm0644 ${FLATPAK_ID}.svg ${FLATPAK_DEST}/share/icons/hicolor/scalable/apps/${FLATPAK_ID}.svg"
      ],
      "sources": [{
        "type": "file",
        "path": "org.exbin.BinEd"
      },{
        "type": "file",
        "path": "org.exbin.BinEd.desktop"
      },{
        "type": "file",
        "path": "org.exbin.BinEd.svg"
      },{
        "type": "file",
        "path": "org.exbin.BinEd.appdata.xml"
      }]
    }
  ]
}
